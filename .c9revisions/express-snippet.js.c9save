{"ts":1360299434524,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1360299457083,"patch":[[{"diffs":[[1,"var app = express();\r\n\r\napp.configure(function () {\r\n    app.use(express.cookieParser());\r\n    app.use(express.session({secret: 'secret', key: 'express.sid'}));\r\n});\r\n\r\n\r\napp.get('/', function (req, res) {\r\n    res.sendfile(__dirname + '/index.html');\r\n});\r\n\r\nserver = http.createServer(app)\r\nserver.listen(3000);"]],"start1":0,"start2":0,"length1":0,"length2":313}]],"length":313,"saved":false}
{"ts":1360299495617,"patch":[[{"diffs":[[0,"p = "],[1,"require('"],[0,"express"],[-1,"("],[1,"'"],[0,");\r\n\r\n"],[1,"\r\n"],[0,"app."]],"start1":6,"start2":6,"length1":22,"length2":33}]],"length":324,"saved":false}
{"ts":1360299514262,"patch":[[{"diffs":[[0,"p = "],[-1,"require('"],[0,"express"],[-1,"'"],[1,"("],[0,");\r\n"]],"start1":6,"start2":6,"length1":25,"length2":16}]],"length":315,"saved":false}
{"ts":1360299544267,"patch":[[{"diffs":[[0,"var "],[-1,"app = express();\r\n\r\n\r\napp.configure(function () {\r\n    "],[1,"io      = require('socket.io'),\r\n    express = require('express');\r\n\r\nvar app    = express.createServer(),\r\n    socket = io.listen(app),\r\n    store  = new express.session.MemoryStore;\r\n"],[0,"app."]],"start1":0,"start2":0,"length1":63,"length2":193},{"diffs":[[0,"er());\r\n"],[-1,"    "],[0,"app.use("]],"start1":215,"start2":215,"length1":20,"length2":16},{"diffs":[[0,"ession({"],[1," "],[0,"secret: "]],"start1":240,"start2":240,"length1":16,"length2":17},{"diffs":[[0,": 's"],[-1,"ecret', key: 'express.sid'}));\r\n});\r\n"],[1,"omething', store: store }));"],[0,"\r\n\r\n"]],"start1":255,"start2":255,"length1":45,"length2":36},{"diffs":[[0,"function"],[-1," "],[0,"(req, re"]],"start1":304,"start2":304,"length1":17,"length2":16},{"diffs":[[0,"\r\n  "],[-1,"  res.sendfile(__dirname + '/index.html');\r\n});\r\n\r\nserver = http.createServer(app)\r\nserver"],[1,"var old = req.session.email;\r\n  req.session.email = req.param('email');\r\n\r\n  res.header('Content-Type', 'text/plain');\r\n  res.send(\"Email was '\" + old + \"', now is '\" + req.session.email + \"'.\");\r\n});\r\n\r\nsocket.on('connection', function(client) {\r\n  // We declare that the first message contains the SID.\r\n  // This is where we handle the first message.\r\n  client.once('message', function(sid) {\r\n    store.get(sid, function(err, session) {\r\n      if (err || !session) {\r\n        // Do some error handling, bail.\r\n        return;\r\n      }\r\n\r\n      // Any messages following are your chat messages.\r\n      client.on('message', function(message) {\r\n        if (message.email === session.email) {\r\n          socket.broadcast(message.text);\r\n        }\r\n      });\r\n    });\r\n  });\r\n});\r\n\r\napp"],[0,".listen("],[-1,"3"],[1,"4"],[0,"000)"]],"start1":324,"start2":324,"length1":107,"length2":803}]],"length":1128,"saved":false}
{"ts":1360299596391,"patch":[[{"diffs":[[0,"ten("],[-1,"4000"],[1,"process.env.PORT"],[0,");"]],"start1":1118,"start2":1118,"length1":10,"length2":22}]],"length":1140,"saved":false}
