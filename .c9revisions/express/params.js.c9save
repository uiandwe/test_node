{"ts":1360803516238,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1360803549848,"patch":[[{"diffs":[[1,"var express = require('express')\r\n  , app = module.exports = express();\r\n\r\n// Faux database\r\n\r\nvar users = [\r\n    { name: 'tj' }\r\n  , { name: 'tobi' }\r\n  , { name: 'loki' }\r\n  , { name: 'jane' }\r\n  , { name: 'bandit' }\r\n];\r\n\r\n// Convert :to and :from to integers\r\n\r\napp.param(['to', 'from'], function(req, res, next, num, name){ \r\n  req.params[name] = num = parseInt(num, 10);\r\n  if( isNaN(num) ){\r\n    next(new Error('failed to parseInt '+num));\r\n  } else {\r\n    next();\r\n  }\r\n});\r\n\r\n// Load user by id\r\n\r\napp.param('user', function(req, res, next, id){\r\n  if (req.user = users[id]) {\r\n    next();\r\n  } else {\r\n    next(new Error('failed to find user'));\r\n  }\r\n});\r\n\r\n/**\r\n * GET index.\r\n */\r\n\r\napp.get('/', function(req, res){\r\n  res.send('Visit /user/0 or /users/0-2');\r\n});\r\n\r\n/**\r\n * GET :user.\r\n */\r\n\r\napp.get('/user/:user', function(req, res, next){\r\n  res.send('user ' + req.user.name);\r\n});\r\n\r\n/**\r\n * GET users :from - :to.\r\n */\r\n\r\napp.get('/users/:from-:to', function(req, res, next){\r\n  var from = req.params.from\r\n    , to = req.params.to\r\n    , names = users.map(function(user){ return user.name; });\r\n  res.send('users ' + names.slice(from, to).join(', '));\r\n});\r\n\r\nif (!module.parent) {\r\n  app.listen(process.env.PORT);\r\n  console.log('Express started on port 3000');\r\n}"]],"start1":0,"start2":0,"length1":0,"length2":1286}]],"length":1286,"saved":false}
