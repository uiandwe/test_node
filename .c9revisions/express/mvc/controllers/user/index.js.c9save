{"ts":1360826305815,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1360826360002,"patch":[[{"diffs":[[1,"var db = require('../../db');\r\n\r\nexports.name = 'pet';\r\nexports.prefix = '/user/:user_id';\r\n\r\nexports.create = function(req, res, next){\r\n  var id = req.params.user_id;\r\n  var user = db.users[id];\r\n  var body = req.body;\r\n  if (!user) return next(new Error('User not found'));\r\n  var pet = { name: body.pet.name };\r\n  pet.id = db.pets.push(pet) - 1;\r\n  user.pets.push(pet);\r\n  res.message('Added pet ' + body.pet.name);\r\n  res.redirect('/user/' + id);\r\n};"]],"start1":0,"start2":0,"length1":0,"length2":455}]],"length":455,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360826408428,"patch":[[{"diffs":[[0,"rts."],[-1,"name = 'pet';\r\nexports.prefix = '/user/:user_id';\r\n\r\nexports.create = function(req, res, next){\r\n  var id = req.params.user_id;\r\n  var user = db.users[id];\r\n  var body = req.body;\r\n"],[1,"before = function(req, res, next){\r\n  var id = req.params.user_id;\r\n  if (!id) return next();\r\n  // pretend to query a database...\r\n  process.nextTick(function(){\r\n    req.user = db.users[id];\r\n    // cant find that user\r\n  "],[0,"  if (!"],[1,"req."],[0,"user"]],"start1":37,"start2":37,"length1":196,"length2":243},{"diffs":[[0,"\r\n  "],[-1,"var pet = { name: body.pet.name"],[1,"  // found it, move on to the routes\r\n    next();\r\n "],[0," }"],[1,")"],[0,";\r\n"],[-1,"  pet.id = db.pets.push(pet) - 1;\r\n  user.pets.push(pet);"],[1,"}\r\n\r\nexports.list = function(req, res, next){\r\n  res.render('list', { users: db.users });\r\n};\r\n\r\nexports.edit = function(req, res, next){\r\n  res.render('edit', { user: req.user });\r\n};\r\n\r\nexports.show = function(req, res, next){"],[0,"\r\n  res."],[-1,"message('Added pet ' +"],[1,"render('show', { user: req.user });\r\n};\r\n\r\nexports.update = function(req, res, next){\r\n  var body = req.body;\r\n  req.user.name ="],[0," body."],[-1,"pet"],[1,"user"],[0,".name"],[1,";\r\n  res.message('Information updated!'"],[0,");\r\n"]],"start1":323,"start2":323,"length1":145,"length2":484},{"diffs":[[0,"ser/' + "],[1,"req.user."],[0,"id);\r\n};"]],"start1":825,"start2":825,"length1":16,"length2":25}]],"length":850,"saved":false}
